syntax = "proto3";
import "google/protobuf/empty.proto";
package jigen;
option csharp_namespace = "Jigen.Proto";

service StoreCollectionService {
  rpc ListCollections (ListCollectionRequest) returns (ListCollectionResult);
  rpc GetContent (GetContentRequest) returns (RawContentResult);
  rpc SetDocument (Document) returns (Result);
  rpc SetVector (Vector) returns (Result);

  rpc CalculateEmbeddings (EmbeddingRequest) returns (EmbeddingResponse);
}

message ListCollectionRequest{
  string Database = 1;
  string Collection = 2;
  bytes Key = 3;  
}

message GetContentRequest{
  string Database = 1;
  string Collection = 2;
  bytes Key = 3;
}

message Document {
  string Database = 1;
  string Collection = 2;
  bytes Key = 3;
  bytes Content = 4;
  string Sentence = 5;
}

message Vector {
  string Database = 1;
  string Collection = 2;
  bytes Key = 3;
  bytes Content = 4;
  repeated float Embeddings = 5;
}

message Result {
  bool Success = 1;
  string Message = 2;
}

message EmbeddingRequest {
  string Message = 1;
}

message EmbeddingResponse {
  repeated float Embeddings = 1;
}

message ListCollectionResult{
  repeated string collections = 1;
}

message RawContentResult{
  bytes content = 1;
}

message JsonContentResult{
  string content = 1;
}